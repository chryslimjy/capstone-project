<!-- index.html -->

<!-- commit before proceeding-->

<!--test-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speech Recognition Example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>

<body>

  <h4>Custom Command Input</h4>

  <p>Command to update</p>
  <p>New Custom command</p>

  <script>
    // Connect to the Socket.IO server
    const socket = io('http://localhost:5000');
    const { ipcRenderer } = require('electron');

    // Listen for the 'connect' event, indicating successful connection
    socket.on('connect', () => {
      console.log('Connected to the Socket.IO server');
    });

    // Listen for the 'disconnect' event, indicating a disconnection
    socket.on('disconnect', (reason) => {
      console.log('Disconnected from the Socket.IO server. Reason:', reason);
    });

    // Listen for the speech recognition event
    socket.on('speech_recognition', (data) => {
      const recognizedText = data.text;
      console.log('Recognized Text:', recognizedText);

      executeCommand(recognizedText.toString())

      // Add your logic to execute functions based on the recognized text
      // For example, you can call different functions or update the UI

      // Log a message indicating that the speech_recognition event is received
      console.log('Speech Recognition Event Received:', data);
    });

    // Optional: Listen for other Socket.IO events and handle them as needed
    socket.on('custom_event', (data) => {
      console.log('Custom Event Received:', data);
    });

    function checkNum(text) {
    // Regular expression to match numbers in text form
    return /^\d+(\.\d+)?$/.test(text);
}


    //scripts for functions
    function executeCommand(text) {

      if (text == 'click') {
        ipcRenderer.send('execute-command-click');
      }

      else if (document.querySelector('.numTag') !== null) {
        console.log("the numTag exists");
        if(checkNum(text)){
          ipcRenderer.send('goto-link');
        }
      
      }

      else if (text.includes('search') || text.includes('such')) {
        const searchQuery = text.substring('search'.length).trim();
        ipcRenderer.send('search-query', searchQuery)
      }

      else if (text.includes('input')) {
        const searchBar = text.substring('input'.length).trim();
        ipcRenderer.send('search-bar', searchBar);

      } else if (text == 'submit') {
        ipcRenderer.send('submit');
      }

      else if (text == 'down') {
        ipcRenderer.send('move-down');
      }

      else if (text == 'up') {
        ipcRenderer.send('move-up');
      }

      else if (text == 'bottom') {
        ipcRenderer.send('move-bottom');
      }

      else if (text == 'top') {
        ipcRenderer.send('move-top');
      }

      else {
        console.log('command not recognised');
      }

    }




  </script>
</body>

</html>