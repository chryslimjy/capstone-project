<!-- index.html -->

<!-- commit before proceeding-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speech Recognition Example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
  <script>
    // Connect to the Socket.IO server
    const socket = io('http://localhost:5000');
    const { ipcRenderer } = require('electron');

    // Listen for the 'connect' event, indicating successful connection
    socket.on('connect', () => {
      console.log('Connected to the Socket.IO server');
    });

    // Listen for the 'disconnect' event, indicating a disconnection
    socket.on('disconnect', (reason) => {
      console.log('Disconnected from the Socket.IO server. Reason:', reason);
    });

    // Listen for the speech recognition event
    socket.on('speech_recognition', (data) => {
      const recognizedText = data.text;
      console.log('Recognized Text:', recognizedText);

      executeCommand(recognizedText.toString())

      // Add your logic to execute functions based on the recognized text
      // For example, you can call different functions or update the UI

      // Log a message indicating that the speech_recognition event is received
      console.log('Speech Recognition Event Received:', data);
    });

    // Optional: Listen for other Socket.IO events and handle them as needed
    socket.on('custom_event', (data) => {
      console.log('Custom Event Received:', data);
    });

    //scripts for functions
    function executeCommand(text) {

      if(text == 'click'){
        ipcRenderer.send('execute-command-click');
        //need to highlight and assign number to each <a> tag
        
          //accurately select the chosen <a> tag

            //enter the selected <a> tag
      } 

      else if(text.includes('search') || text.includes('such')){
        const searchQuery = text.substring('search'.length).trim();
        ipcRenderer.send('search-query', searchQuery)
      }

      else if(text.includes('input')){
        const searchBar = text.substring('input'.length).trim();
        ipcRenderer.send('search-bar', searchBar);

        if(text == 'submit'){
          ipcRenderer.send('submit');
        }

      }
      
      
      else{
        console.log('command not recognised');
      }
      
    }



  
  </script>
</body>
</html>
