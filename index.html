<!-- index.html -->

<!-- commit before proceeding-->

<!--test-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NLP Web Browsing</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>

<body>

  <script>
    // Connect to the Socket.IO server
    const socket = io('http://localhost:5000');
    const { ipcRenderer } = require('electron');

    // Listen for the 'connect' event, indicating successful connection
    socket.on('connect', () => {
      console.log('Connected to the Socket.IO server');
    });

    // Listen for the 'disconnect' event, indicating a disconnection
    socket.on('disconnect', (reason) => {
      console.log('Disconnected from the Socket.IO server. Reason:', reason);
    });


    socket.on('intent-browser-command', (data) => {
      var browserCommand = data.text;
      ipcRenderer.send('browser-command', browserCommand)
      console.log('command said:', browserCommand);
    });




    socket.on('intent-open-website', (data) => {
      const openWebsite = data.text;
      //if it comes here, the intent is to open a common webpage
      console.log('Recognized Text:', openWebsite)

      ipcRenderer.send('open-common-website', openWebsite);

      console.log('user said:', data);
    });

    socket.on('intent-search-query', (data) => {
      var searchQuery = data.text;
      if (searchQuery.includes('search') || searchQuery.includes('such')) {
        searchQuery = searchQuery.substring('search'.length-1).trim();
        ipcRenderer.send('search-query', searchQuery)
      }

      console.log('the recognized search intent is:', searchQuery);
    });

//test stuff
    // ADD FUNCTION FOR THIS
    //if it comes here, the intent is to perform a search query
      //insert code here to scrape page for the returned results
      //store scraped results in array
      //normal function


      //
    function getLink() {
      //get the following data: domain/title/url
   

    }






    //scripts for functions
    function executeCommand(text) {



      if (text == 'click') {
        ipcRenderer.send('execute-command-click');
        tagExist = true;
      }



     

      // else if (text.includes('input')) {
      //   const searchBar = text.substring('input'.length).trim();
      //   ipcRenderer.send('search-bar', searchBar);

      // } else if (text == 'submit') {
      //   ipcRenderer.send('submit');
      // }

      // else if (text == 'down') {
      //   ipcRenderer.send('move-down');
      // }

      // else if (text == 'up') {
      //   ipcRenderer.send('move-up');
      // }

      // else if (text == 'bottom') {
      //   ipcRenderer.send('move-bottom');
      // }

      // else if (text == 'top') {
      //   ipcRenderer.send('move-top');
      // }



      else {
        console.log('command not recognised');
      }

    }




  </script>
</body>

</html>